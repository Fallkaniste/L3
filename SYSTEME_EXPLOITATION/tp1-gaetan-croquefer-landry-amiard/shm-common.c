#include "shm-common.h"

/*TODO shmctl(sharedMemoryId, IPC_RMID, NULL);*/

void printError(void* nullPtr, ... )
{
  char* format=NULL;
  va_list args;

  switch (errno)
  {
    case 2 :
      format="%s:%s:%d: Unable to create the System V IPC key from the \"%s\" pathname and the \"%ld\" project identifier.\n";
      break;
    case 17 :
      format="%s:%s:%d: Unable to get the identifier of the System V shared memory segment from the \"0x%x\" key.\n";
      break;
    case 22 :
      format="%s:%s:%d: Unable to get the adress of the System V shared memory segment from the \"%d\" identifier.\n";
      break;
    case 30 :
      format="%s:%s:%d: Unable to set the \"%s\" name because its \"%d\" size is greater than \"%d\".\n";
      break;
    case 31 :
      format="%s:%s:%d: Unable to set the \"%s\" message text because its \"%d\" size is greater than \"%d\".\n";
      break;
    case 32 :
      format="%s:%s:%d: Unable to copy the message because the target message adress is NULL.\n";
      break;
    case 33 :
      format="%s:%s:%d: Unable to copy the message because the target message is not empty.\n";
      break;
    default:
      fprintf(stderr, "Unknown error code: %d\n", errno);
      exit(-1);
  }

  va_start (args, nullPtr);
  vfprintf (stderr, format, args);
  va_end (args);
  exit(-1);
}