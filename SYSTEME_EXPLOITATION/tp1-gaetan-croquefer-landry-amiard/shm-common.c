#include "shm-common.h"

void printError(void* nullPtr, ... )
{
  char* format=NULL;
  va_list args;
  printf("ERRNO :%d", errno);
  switch (errno)
  {
    case ENOENT :
      format="%s:%s:%d: Unable to create the System V IPC key from the \"%s\" pathname and the \"%ld\" project identifier.\n";
      break;
    case EEXIST :
      format="%s:%s:%d: Unable to get the identifier of the System V shared memory segment from the \"0x%x\" key.\n";
      break;
    case EINVAL :
      format="%s:%s:%d: Unable to get the adress of the System V shared memory segment from the \"%d\" identifier.\n";
      break;
    case ENAN :
      format="%s:%s:%d: \"%s\" is not a number.\n";
      break;
    case EMSGNAM :
      format="%s:%s:%d: Unable to set the \"%s\" name.\n";
      break;
    case EMSGTXT :
      format="%s:%s:%d: Unable to set the \"%s\" message text.\n";
      break;
    case EMSGADR :
      format="%s:%s:%d: Unable to copy the message because target message adress is NULL.\n";
      break;
    case EMSGCPY :
      format="%s:%s:%d: Unable to copy the message.\n";
      break;
    default:
      fprintf(stderr, "Unknown error code: %d\n", errno);
      exit(1);
  }

  va_start (args, nullPtr);
  vfprintf (stderr, format, args);
  va_end (args);
  exit(1);
}
