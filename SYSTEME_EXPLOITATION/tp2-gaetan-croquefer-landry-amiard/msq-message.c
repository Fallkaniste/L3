#include "msq-common.h"


void msq_message_print(msq_message_t message)
{
  time_t rawtime;
  struct tm* actualDate;

  time(&rawtime);
  actualDate=localtime(&rawtime);

  printf("%d-%02d-%02d %02d:%02d:%02d: ",1900+actualDate->tm_year, actualDate->tm_mon, actualDate->tm_mday, actualDate->tm_hour, actualDate->tm_min, actualDate->tm_sec);
  printf("%ld: %s\n", message.type, message.text);
}

int msq_message_set_type(msq_message_t *message, long int type)
{
  if(type<=0)
  {
    errno=EMSGTYP;
    return -1;
  }
  message->type=type;
  return 0;
}

int msq_message_set_text(msq_message_t *message, const char *text)
{
  if(strlen(text)>MSQ_MESSAGE_TEXT_SIZE)
  {
    errno=EMSGTXT;
    return -1;
  }
  strcpy(message->text, text);
  return 0;
}
